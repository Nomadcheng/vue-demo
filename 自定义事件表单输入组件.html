<!DOCTYPE html>
<html>
<head>
    <title>vue
    </title>
    <script type="text/javascript" src=vue.js></script>
    </head>
</head>
<body>
    <div id = "formatted">
          <currency-input v-model="price"></currency-input>        
    </div>
    <script type="text/javascript">
        Vue.component('currency-input', {
            template: `
                    <span>
                        $
                        <input
                            ref="input"
                            v-bind:value="value"
                            v-on:input="updateValue($event.target.value)"
                        >
                    </span>
                `,
            props: ['value'],
            methods: {
                updateValue: function (value) {
                    var formattedValue = value
                        .slice(
                            0,
                            value.indexOf('.') === -1
                                ? value.length
                                : value.indexOf('.') + 3
                        ).trim();
                if (formattedValue !== value ) {
                     // 如果值不统一，手动覆盖以保持一致
                    this.$refs.input.value = formattedValue;
                }
                // 通过input事件发出数值
                this.$emit(' input ', Number(formattedValue));
                }
            }
        });
         new Vue({
            el : '#formatted',
            data:{
                price:0,
            }
         });
    </script>
</body>
</html>