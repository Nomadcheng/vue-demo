<!DOCTYPE html>
<html>
<head>
    <title>组件通信</title>
    <script type="text/javascript" src="vue.js"></script>
</head>
<body>
    <div id="app">
        <!-- 父组件 -->
        <p>{{ total }}</p>
        <child @add="incrementTotal" ref = "childTest" :num-a="total" num-s="total"></child>
        <child @add="incrementTotal" ref = "childT" :num-a="total" num-s="total"></child>
        <button type="button" @click="clickref">调用子组件</button>
        <button type="button" @click="clickref2">调用子组件</button>

    </div>

    <script type="text/javascript">
        new Vue({
            el: '#app',
            data: {
                total:0
            },
            methods: {
                incrementTotal: function() {
                    ++this.total;
                },
                clickref: function() {
                    let childRef = this.$refs.childTest;
                          childRef.counter = 45;
                          childRef.add('11');
                          console.log(childRef);
                },
                clickref2: function() {
                    let childRef2 = this.$refs.childT;
                         childRef2.counter = 44;
                }
            },
            components: {
                'child': {
                    template:'<button @click="add">{{ counter }}</button>',
                    data : function() {
                        return {
                            counter : 0
                        };
                    },
                    props: ['numA','numS'],
                    methods: {
                        add : function (num) {
                            ++this.counter;
                            console.log(num);
                            this.$emit('add');
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>